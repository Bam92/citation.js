<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: get/bibtex/json.js - Docs - Citation.js</title>
    
    <meta name="theme-color" content="#FFC107">
    <link rel="shortcut icon" type="image/png" href="../favicon.png"/>
    <link rel="icon" type="image/png" href="../favicon.png"/>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="../static/css/api.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: get/bibtex/json.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import fetchBibTeXType from './type'
import getBibTeXLabel from './label'
import getName from '../name'
import getDate from '../date'

/**
 * Get BibTeX-JSON from CSL(-JSON)
 *
 * @access protected
 * @method getBibTeXJSON
 *
 * @param {CSL} src - Input CSL
 *
 * @return {Object} Output BibTeX-JSON
 */
const getBibTeXJSON = function (src) {
  const res = {
    label: src.label || getBibTeXLabel(src),
    type: fetchBibTeXType(src.type)
  }
  const props = {}

  if (src.hasOwnProperty('author')) { props.author = src.author.map(getName).join(' and ') }
  if (src.hasOwnProperty('event')) { props.organization = src.event }
  if (src.hasOwnProperty('accessed')) { props.note = '[Online; accesed ' + getDate(src.accessed) + ']' }
  if (src.hasOwnProperty('DOI')) { props.doi = src.DOI }
  if (src.hasOwnProperty('editor')) { props.editor = src.editor.map(getName).join(' and ') }
  if (src.hasOwnProperty('ISBN')) { props.isbn = src.ISBN }
  if (src.hasOwnProperty('ISSN')) { props.issn = src.ISSN }
  if (src.hasOwnProperty('container-title')) { props.journal = src['container-title'] }
  if (src.hasOwnProperty('issue')) { props.issue = src.issue.toString() }
  if (src.hasOwnProperty('page')) { props.pages = src.page.replace('-', '--') }
  if (src.hasOwnProperty('publisher-place')) { props.address = src['publisher-place'] }
  if (src.hasOwnProperty('edition')) { props.edition = src.edition.toString() }
  if (src.hasOwnProperty('publisher')) { props.publisher = src.publisher }
  if (src.hasOwnProperty('title')) { props.title = src['title'] }
  if (src.hasOwnProperty('url')) { props.url = src.url }
  if (src.hasOwnProperty('volume')) { props.volume = src.volume.toString() }
  if (src.hasOwnProperty('issued') &amp;&amp;
      Array.isArray(src.issued) &amp;&amp;
      src.issued[0]['date-parts'].length === 3) {
    props.year = src.issued[0]['date-parts'][0].toString()
  }

  res.properties = props

  return res
}

export default getBibTeXJSON
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Cite.html">Cite</a></li><li><a href="CSL.html">CSL</a></li></ul><h3>Global</h3><ul><li><a href="global.html#deepCopy">deepCopy</a></li><li><a href="global.html#fetchBibTeXType">fetchBibTeXType</a></li><li><a href="global.html#fetchCSLEngine">fetchCSLEngine</a></li><li><a href="global.html#fetchCSLItemCallback">fetchCSLItemCallback</a></li><li><a href="global.html#fetchCSLLocale">fetchCSLLocale</a></li><li><a href="global.html#fetchCSLStyle">fetchCSLStyle</a></li><li><a href="global.html#fetchFile">fetchFile</a></li><li><a href="global.html#fetchId">fetchId</a></li><li><a href="global.html#fetchWikidataLabel">fetchWikidataLabel</a></li><li><a href="global.html#fetchWikidataType">fetchWikidataType</a></li><li><a href="global.html#getAttributedEntry">getAttributedEntry</a></li><li><a href="global.html#getBibTeX">getBibTeX</a></li><li><a href="global.html#getBibTeXJSON">getBibTeXJSON</a></li><li><a href="global.html#getBibTeXLabel">getBibTeXLabel</a></li><li><a href="global.html#getDate">getDate</a></li><li><a href="global.html#getJSON">getJSON</a></li><li><a href="global.html#getJSONObjectHTML">getJSONObjectHTML</a></li><li><a href="global.html#getJSONValueHTML">getJSONValueHTML</a></li><li><a href="global.html#getLabel">getLabel</a></li><li><a href="global.html#getName">getName</a></li><li><a href="global.html#getPrefixedEntry">getPrefixedEntry</a></li><li><a href="global.html#parseBibTeX">parseBibTeX</a></li><li><a href="global.html#parseBibTeXJSON">parseBibTeXJSON</a></li><li><a href="global.html#parseBibTeXProp">parseBibTeXProp</a></li><li><a href="global.html#parseBibTeXType">parseBibTeXType</a></li><li><a href="global.html#parseContentMine">parseContentMine</a></li><li><a href="global.html#parseDate">parseDate</a></li><li><a href="global.html#parseInput">parseInput</a></li><li><a href="global.html#parseInputChainLink">parseInputChainLink</a></li><li><a href="global.html#parseInputData">parseInputData</a></li><li><a href="global.html#parseInputType">parseInputType</a></li><li><a href="global.html#parseJSON">parseJSON</a></li><li><a href="global.html#parseName">parseName</a></li><li><a href="global.html#parseWikidata">parseWikidata</a></li><li><a href="global.html#parseWikidataJSON">parseWikidataJSON</a></li><li><a href="global.html#parseWikidataProp">parseWikidataProp</a></li><li><a href="global.html#varBibTeXSyntaxTokens">varBibTeXSyntaxTokens</a></li><li><a href="global.html#varBibTeXTokens">varBibTeXTokens</a></li><li><a href="global.html#varCSLEngines">varCSLEngines</a></li><li><a href="global.html#varCSLLocales">varCSLLocales</a></li><li><a href="global.html#varCSLStyles">varCSLStyles</a></li><li><a href="global.html#varHTMLDict">varHTMLDict</a></li><li><a href="global.html#varRegex">varRegex</a></li><li><a href="global.html#varWikidataTypes">varWikidataTypes</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Tue May 09 2017 20:33:08 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>